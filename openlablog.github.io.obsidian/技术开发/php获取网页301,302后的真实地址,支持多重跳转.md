---
created: 2026-01-08 17:35:07
modified: 2026-01-16 20:44:55
---

```php
function getrealurl($url){
    $realurl = $url;
    try {
        $headers = get_headers($realurl, true);
        if(isset($headers['Location'])){
            if(is_array($headers['Location'])){
                $location = '';
                for($i=count($headers['Location']); $i>0; $i--){
                    $location = $headers['Location'][$i-1] . $location;
                    if (preg_match("/^(http|https)\:\/\//i", $location)) {
                        break;
                    }
                }
                $realurl = $location;
            }else{
                if (!preg_match("/^(http|https)\:\/\//i", $headers['Location'])) {
                    $realurl .= $headers['Location'];
                }else{
                    $realurl = $headers['Location'];
                }
            }
        }
    } catch (Exception $e) {
    }
    return $realurl;
}
```
